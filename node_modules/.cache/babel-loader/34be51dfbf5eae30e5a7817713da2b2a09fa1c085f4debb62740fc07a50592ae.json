{"ast":null,"code":"import _toConsumableArray from\"/home/onemorebottlee/Desktop/wanted-pre-onboarding-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/onemorebottlee/Desktop/wanted-pre-onboarding-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/onemorebottlee/Desktop/wanted-pre-onboarding-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/onemorebottlee/Desktop/wanted-pre-onboarding-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{createTodo,deleteTodo,getTodos}from\"../apis\";import ToDo from\"../Components/todo\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function TodoPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todoList=_useState2[0],setTodoList=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newTodo=_useState4[0],setNewTodo=_useState4[1];var navigate=useNavigate();var token=localStorage.getItem(\"access_token\");// 페이지 시작시\nuseEffect(function(){// 토큰이 있다면 Todo 리스트 받아오기\n// 토큰이 없다면 로그인 페이지로 이동\ntoken?updateList():navigate(\"/signin\");},[]);// 리스트 업데이트\nvar updateList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var list;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getTodos(token);case 2:list=_context.sent;setTodoList(list);case 4:case\"end\":return _context.stop();}},_callee);}));return function updateList(){return _ref.apply(this,arguments);};}();// 투두 생성\nvar createHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var newToDo;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return createTodo(token,newTodo);case 2:newToDo=_context2.sent;setTodoList(function(old){return[].concat(_toConsumableArray(old),[newToDo]);});case 4:case\"end\":return _context2.stop();}},_callee2);}));return function createHandler(){return _ref2.apply(this,arguments);};}();// 투두 삭제\nvar deleteHandler=function deleteHandler(id){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var remainList;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return deleteTodo(token,id);case 2:remainList=todoList.filter(function(todo){return todo.id!==id;});setTodoList(remainList);case 4:case\"end\":return _context3.stop();}},_callee3);}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate(\"/\");},children:\"\\uBA54\\uC778 \\uC774\\uB3D9\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"To Do\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\",/*#__PURE__*/_jsx(\"input\",{\"data-testid\":\"new-todo-input\",onChange:function onChange(e){return setNewTodo(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"new-todo-add-button\",onClick:createHandler,children:\"\\uCD94\\uAC00\"})]}),/*#__PURE__*/_jsx(\"div\",{children:\"To Do List\"}),todoList.map(function(el){return/*#__PURE__*/_jsx(ToDo,{props:el,deleteHandler:deleteHandler},el.id);})]});}","map":{"version":3,"names":["useEffect","useState","useNavigate","createTodo","deleteTodo","getTodos","ToDo","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TodoPage","_useState","_useState2","_slicedToArray","todoList","setTodoList","_useState3","_useState4","newTodo","setNewTodo","navigate","token","localStorage","getItem","updateList","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","list","wrap","_callee$","_context","prev","next","sent","stop","apply","arguments","createHandler","_ref2","_callee2","newToDo","_callee2$","_context2","old","concat","_toConsumableArray","deleteHandler","id","_callee3","remainList","_callee3$","_context3","filter","todo","children","onClick","onChange","e","target","value","map","el","props"],"sources":["/home/onemorebottlee/Desktop/wanted-pre-onboarding-frontend/src/pages/todoPage.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { createTodo, deleteTodo, getTodos } from \"../apis\";\nimport ToDo from \"../Components/todo\";\nimport { TodoListData } from \"../types/todo\";\n\nexport default function TodoPage() {\n    const [todoList, setTodoList] = useState<TodoListData[]>([])\n    const [newTodo, setNewTodo] = useState(\"\")\n    const navigate = useNavigate()\n    const token = localStorage.getItem(\"access_token\")\n\n    // 페이지 시작시\n    useEffect(() => {\n        // 토큰이 있다면 Todo 리스트 받아오기\n        // 토큰이 없다면 로그인 페이지로 이동\n        token ? updateList() : navigate(\"/signin\")\n    }, [])\n\n    // 리스트 업데이트\n    const updateList = async () => {\n        const list = await getTodos(token!)\n        setTodoList(list)\n    }\n\n    // 투두 생성\n    const createHandler = async () => {\n        const newToDo = await createTodo(token!, newTodo)\n        setTodoList((old) => [...old, newToDo])\n    }\n\n    // 투두 삭제\n    const deleteHandler = (id: number) => {\n        return async () => {\n            await deleteTodo(token!, id)\n            const remainList = todoList.filter(todo => todo.id !== id)\n            setTodoList(remainList)\n        }\n    }\n\n    return (\n        <>\n            <button onClick={() => navigate(\"/\")}>메인 이동</button>\n            <div>To Do를 입력하세요\n                <input data-testid=\"new-todo-input\" onChange={(e) => setNewTodo(e.target.value)} />\n                <button data-testid=\"new-todo-add-button\" onClick={createHandler}>추가</button>\n            </div>\n            <div>To Do List</div>\n            {todoList.map(el => {\n                return <ToDo key={el.id} props={el} deleteHandler={deleteHandler} />\n            })}\n        </>\n    )\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}